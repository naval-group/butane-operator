include:
  - local: .gitlab/ci/*.gitlab-ci.yml

workflow:
  rules:
    - if: $CI_COMMIT_BRANCH
    - if: $CI_COMMIT_TAG

stages: [
  🚦 test,
  🛰️ scan,
  📦 build,
  🚀 push
]

variables:
  CLOUD_DOMAIN: mylittleforge.org
  PUBLIC_OCI_REGISTRY: harbor.main.dmz.$CLOUD_DOMAIN
  INTERNAL_OCI_REGISTRY: internal.repo.$CLOUD_DOMAIN

  GOSUMDB: "off"
  GOPROXY: https://nexus.main.dmz.mylittleforge.org/repository/go-proxy,direct
  GONOPROXY: gitlab.ftf.everest.mylittleforge.org/*